"use strict";(globalThis.webpackChunkgodot_iap_docs=globalThis.webpackChunkgodot_iap_docs||[]).push([[768],{2152(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/troubleshooting","title":"Troubleshooting","description":"This guide covers common issues you might encounter when implementing in-app purchases with GodotIap and how to resolve them.","source":"@site/docs/guides/troubleshooting.md","sourceDirName":"guides","slug":"/guides/troubleshooting","permalink":"/godot-iap/guides/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/godot-iap/tree/main/docs/docs/guides/troubleshooting.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Troubleshooting","sidebar_label":"Troubleshooting","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Error Handling","permalink":"/godot-iap/guides/error-handling"},"next":{"title":"API Reference","permalink":"/godot-iap/api/"}}');var r=s(4848),t=s(8453),o=s(5159);const c={title:"Troubleshooting",sidebar_label:"Troubleshooting",sidebar_position:5},l="Troubleshooting",a={},d=[{value:"Prerequisites Checklist",id:"prerequisites-checklist",level:2},{value:"App Store Setup (iOS)",id:"app-store-setup-ios",level:3},{value:"Google Play Setup (Android)",id:"google-play-setup-android",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"<code>fetch_products()</code> Returns Empty Array",id:"fetch_products-returns-empty-array",level:3},{value:"1. Connection Not Established",id:"1-connection-not-established",level:4},{value:"2. Product IDs Don&#39;t Match",id:"2-product-ids-dont-match",level:4},{value:"3. Products Not Approved (iOS)",id:"3-products-not-approved-ios",level:4},{value:"4. App Not Uploaded to Play Console (Android)",id:"4-app-not-uploaded-to-play-console-android",level:4},{value:"Plugin Not Found",id:"plugin-not-found",level:3},{value:"1. Check if Singleton Exists",id:"1-check-if-singleton-exists",level:4},{value:"2. Verify Export Settings",id:"2-verify-export-settings",level:4},{value:"Purchase Flow Issues",id:"purchase-flow-issues",level:3},{value:"1. Purchases Not Completing",id:"1-purchases-not-completing",level:4},{value:"2. <code>purchase_updated</code> Signal Triggering on App Restart",id:"2-purchase_updated-signal-triggering-on-app-restart",level:4},{value:"Connection Issues",id:"connection-issues",level:3},{value:"1. Network Connectivity",id:"1-network-connectivity",level:4},{value:"2. Store Service Unavailable",id:"2-store-service-unavailable",level:4},{value:"Platform-Specific Issues",id:"platform-specific-issues",level:3},{value:"iOS Issues",id:"ios-issues",level:4},{value:"Android Issues",id:"android-issues",level:4},{value:"Debugging Tips",id:"debugging-tips",level:2},{value:"1. Enable Verbose Logging",id:"1-enable-verbose-logging",level:3},{value:"2. Monitor Connection State",id:"2-monitor-connection-state",level:3},{value:"3. Check Device Logs",id:"3-check-device-logs",level:3},{value:"Testing Strategies",id:"testing-strategies",level:2},{value:"1. Staged Testing Approach",id:"1-staged-testing-approach",level:3},{value:"2. Test Different Scenarios",id:"2-test-different-scenarios",level:3},{value:"3. Device Testing Matrix",id:"3-device-testing-matrix",level:3},{value:"Error Code Reference",id:"error-code-reference",level:2},{value:"Getting Help",id:"getting-help",level:2},{value:"Bug Report Template",id:"bug-report-template",level:3},{value:"See Also",id:"see-also",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,r.jsx)(o.A,{}),"\n",(0,r.jsx)(n.p,{children:"This guide covers common issues you might encounter when implementing in-app purchases with GodotIap and how to resolve them."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites-checklist",children:"Prerequisites Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Before diving into troubleshooting, ensure you have completed these essential steps:"}),"\n",(0,r.jsx)(n.h3,{id:"app-store-setup-ios",children:"App Store Setup (iOS)"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Agreements"}),": Completed all agreements, tax, and banking information in App Store Connect"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Sandbox Account"}),': Created sandbox testing accounts in "Users and Roles"']}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Device Setup"}),": Signed into iOS device with sandbox account"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Products Created"}),': Set up In-App Purchase products with status "Ready to Submit"']}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"StoreKit Capability"}),": Added StoreKit capability in Xcode"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"google-play-setup-android",children:"Google Play Setup (Android)"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Play Console"}),": Completed all required information in Google Play Console"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Test Accounts"}),": Added test accounts to your app's testing track"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Signed Build"}),": Using signed APK/AAB (not debug builds)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Upload"}),": Uploaded at least one version to internal testing"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Products Active"}),': Products are set to "Active" status']}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.h3,{id:"fetch_products-returns-empty-array",children:[(0,r.jsx)(n.code,{children:"fetch_products()"})," Returns Empty Array"]}),"\n",(0,r.jsx)(n.p,{children:"This is one of the most common issues. Here are the potential causes and solutions:"}),"\n",(0,r.jsx)(n.h4,{id:"1-connection-not-established",children:"1. Connection Not Established"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'var is_connected: bool = false\n\nfunc _initialize():\n    var result = JSON.parse_string(iap.init_connection())\n\n    if result.get("success", false):\n        is_connected = true\n        # Only fetch products AFTER successful connection\n        _load_products()\n    else:\n        print("Connection failed: ", result.get("error", ""))\n\nfunc _load_products():\n    if not is_connected:\n        print("Cannot fetch products - not connected")\n        return\n\n    var product_ids = ["coins_100", "premium"]\n    iap.fetch_products(JSON.stringify(product_ids), "inapp")\n'})}),"\n",(0,r.jsx)(n.h4,{id:"2-product-ids-dont-match",children:"2. Product IDs Don't Match"}),"\n",(0,r.jsx)(n.p,{children:"Ensure your product IDs exactly match those configured in the stores:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'# Wrong: Using different IDs\nvar product_ids = ["my_product_1", "my_product_2"]\n\n# Correct: Using exact IDs from store\nvar product_ids = ["com.yourapp.coins_100", "com.yourapp.premium"]\n'})}),"\n",(0,r.jsx)(n.h4,{id:"3-products-not-approved-ios",children:"3. Products Not Approved (iOS)"}),"\n",(0,r.jsx)(n.p,{children:"Products need time to propagate through Apple's systems:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Wait up to 24 hours after creating products"}),"\n",(0,r.jsx)(n.li,{children:'Ensure products are in "Ready to Submit" status'}),"\n",(0,r.jsx)(n.li,{children:"Test with sandbox accounts"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"4-app-not-uploaded-to-play-console-android",children:"4. App Not Uploaded to Play Console (Android)"}),"\n",(0,r.jsx)(n.p,{children:"For Android, your app must be uploaded to Play Console:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Export signed APK from Godot\n# Upload to Play Console internal testing track\n"})}),"\n",(0,r.jsx)(n.h3,{id:"plugin-not-found",children:"Plugin Not Found"}),"\n",(0,r.jsx)(n.h4,{id:"1-check-if-singleton-exists",children:"1. Check if Singleton Exists"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _ready():\n    if not Engine.has_singleton("GodotIap"):\n        print("GodotIap plugin not available!")\n        print("Make sure the plugin is enabled in export settings")\n        return\n\n    iap = Engine.get_singleton("GodotIap")\n'})}),"\n",(0,r.jsx)(n.h4,{id:"2-verify-export-settings",children:"2. Verify Export Settings"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Android:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to Project \u2192 Export"}),"\n",(0,r.jsx)(n.li,{children:"Select Android preset"}),"\n",(0,r.jsx)(n.li,{children:'Scroll to "Plugins"'}),"\n",(0,r.jsx)(n.li,{children:'Ensure "GodotIap" is checked'}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"iOS:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Build the plugin using ",(0,r.jsx)(n.code,{children:"swift build"})]}),"\n",(0,r.jsx)(n.li,{children:"Copy framework to your Xcode project"}),"\n",(0,r.jsx)(n.li,{children:"Ensure framework is linked"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"purchase-flow-issues",children:"Purchase Flow Issues"}),"\n",(0,r.jsx)(n.h4,{id:"1-purchases-not-completing",children:"1. Purchases Not Completing"}),"\n",(0,r.jsx)(n.p,{children:"Always handle purchase updates and finish transactions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _on_purchase_updated(purchase: Dictionary):\n    var state = purchase.get("purchaseState", "")\n\n    if state == "purchased":\n        # Validate receipt on your server\n        var is_valid = await validate_on_server(purchase)\n\n        if is_valid:\n            # Grant purchase to user\n            grant_purchase(purchase.productId)\n\n            # ALWAYS finish the transaction\n            var params = {\n                "purchase": purchase,\n                "isConsumable": is_consumable(purchase.productId)\n            }\n            iap.finish_transaction(JSON.stringify(params))\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Important - Transaction Acknowledgment Requirements:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS"}),": Unfinished transactions remain in the queue indefinitely until ",(0,r.jsx)(n.code,{children:"finish_transaction"})," is called"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Android"}),": Purchases must be acknowledged within ",(0,r.jsx)(n.strong,{children:"3 days (72 hours)"})," or they will be ",(0,r.jsx)(n.strong,{children:"automatically refunded"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"2-purchase_updated-signal-triggering-on-app-restart",children:["2. ",(0,r.jsx)(n.code,{children:"purchase_updated"})," Signal Triggering on App Restart"]}),"\n",(0,r.jsx)(n.p,{children:"This happens when transactions are not properly finished. The store replays unfinished transactions on app startup."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Your ",(0,r.jsx)(n.code,{children:"purchase_updated"})," signal fires automatically every time the app starts."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": You didn't call ",(0,r.jsx)(n.code,{children:"finish_transaction"})," after processing the purchase."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Always call ",(0,r.jsx)(n.code,{children:"finish_transaction"})," after successfully processing:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _on_purchase_updated(purchase: Dictionary):\n    if purchase.purchaseState == "purchased":\n        # 1. Validate on server\n        var is_valid = await validate_on_server(purchase)\n        if not is_valid:\n            print("Invalid purchase")\n            return\n\n        # 2. Process the purchase\n        await process_purchase(purchase)\n\n        # 3. FINISH THE TRANSACTION\n        var params = {\n            "purchase": purchase,\n            "isConsumable": is_consumable(purchase.productId)\n        }\n        iap.finish_transaction(JSON.stringify(params))\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Handle pending transactions on startup:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _ready():\n    if Engine.has_singleton("GodotIap"):\n        iap = Engine.get_singleton("GodotIap")\n        _setup_signals()\n        _initialize()\n\nfunc _initialize():\n    var result = JSON.parse_string(iap.init_connection())\n    if result.get("success", false):\n        # Check for pending purchases FIRST\n        _check_pending_purchases()\n        # Then load products\n        _load_products()\n\nfunc _check_pending_purchases():\n    var purchases = JSON.parse_string(iap.get_available_purchases())\n\n    for purchase in purchases:\n        if await is_already_processed(purchase):\n            # Just finish the transaction\n            var params = {"purchase": purchase, "isConsumable": false}\n            iap.finish_transaction(JSON.stringify(params))\n        else:\n            # Process then finish\n            await process_purchase(purchase)\n            var params = {"purchase": purchase, "isConsumable": is_consumable(purchase.productId)}\n            iap.finish_transaction(JSON.stringify(params))\n'})}),"\n",(0,r.jsx)(n.h3,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,r.jsx)(n.h4,{id:"1-network-connectivity",children:"1. Network Connectivity"}),"\n",(0,r.jsx)(n.p,{children:"Handle network errors gracefully:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _initialize():\n    var result = JSON.parse_string(iap.init_connection())\n\n    if not result.get("success", false):\n        var error = result.get("error", "")\n\n        if "network" in error.to_lower():\n            show_retry_dialog("Network error. Please check your connection.")\n        else:\n            show_error("Failed to connect to store: " + error)\n\nfunc show_retry_dialog(message: String):\n    # Show dialog with retry button\n    # On retry: call _initialize() again\n    pass\n'})}),"\n",(0,r.jsx)(n.h4,{id:"2-store-service-unavailable",children:"2. Store Service Unavailable"}),"\n",(0,r.jsx)(n.p,{children:"Sometimes store services are temporarily unavailable:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func handle_store_unavailable():\n    var dialog = AcceptDialog.new()\n    dialog.title = "Store Unavailable"\n    dialog.dialog_text = "The store is temporarily unavailable. Please try again later."\n    add_child(dialog)\n    dialog.popup_centered()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"platform-specific-issues",children:"Platform-Specific Issues"}),"\n",(0,r.jsx)(n.h4,{id:"ios-issues",children:"iOS Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Invalid Product ID Error"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'# Ensure:\n# - Signed in with sandbox account on device\n# - Product IDs match exactly (case-sensitive)\n# - App bundle ID matches App Store Connect\n# - Products are in "Ready to Submit" status\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"StoreKit Configuration"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# In Xcode:\n# - Add StoreKit capability\n# - For iOS 15+, ensure SwiftUI is available\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Sandbox Testing"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:"# For iOS sandbox testing:\n# 1. Sign out of App Store on device\n# 2. Don't sign in until prompted during purchase\n# 3. Use sandbox account credentials when prompted\n"})}),"\n",(0,r.jsx)(n.h4,{id:"android-issues",children:"Android Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Billing Client Setup"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gradle",children:'// android/build.gradle.kts\ndependencies {\n    implementation("com.android.billingclient:billing:7.0.0")\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"License Testing"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:"# For Android testing:\n# 1. Add your test account email to Google Play Console\n# 2. Go to Settings \u2192 License testing\n# 3. Add the Gmail accounts\n# 4. Testers can purchase without being charged\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Version Code Issues"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:"# Ensure:\n# - App is uploaded to Play Console (at least internal track)\n# - Version code matches or exceeds uploaded version\n# - Test device uses account added to testing track\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Service Disconnected"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _on_purchase_error(error: Dictionary):\n    if error.get("code") == "SERVICE_DISCONNECTED":\n        # Attempt to reconnect\n        var result = JSON.parse_string(iap.init_connection())\n        if result.get("success", false):\n            print("Reconnected to Google Play")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"debugging-tips",children:"Debugging Tips"}),"\n",(0,r.jsx)(n.h3,{id:"1-enable-verbose-logging",children:"1. Enable Verbose Logging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'func _on_purchase_updated(purchase: Dictionary):\n    print("=== Purchase Updated ===")\n    print(JSON.stringify(purchase, "\\t"))\n    print("========================")\n\nfunc _on_purchase_error(error: Dictionary):\n    print("=== Purchase Error ===")\n    print(JSON.stringify(error, "\\t"))\n    print("======================")\n\nfunc _on_products_fetched(products: Array):\n    print("=== Products Fetched ===")\n    for product in products:\n        print(JSON.stringify(product, "\\t"))\n    print("========================")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-monitor-connection-state",children:"2. Monitor Connection State"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'var is_connected: bool = false\n\nfunc _initialize():\n    var result = JSON.parse_string(iap.init_connection())\n    is_connected = result.get("success", false)\n\n    print("Connection state: ", "Connected" if is_connected else "Disconnected")\n\n    if not is_connected:\n        print("Connection error: ", result.get("error", "Unknown"))\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-check-device-logs",children:"3. Check Device Logs"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Android (adb logcat):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'adb logcat | grep -i "GodotIap\\|BillingClient\\|Purchase"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"iOS (Xcode Console):"}),"\nLook for StoreKit-related logs in Xcode's debug console."]}),"\n",(0,r.jsx)(n.h2,{id:"testing-strategies",children:"Testing Strategies"}),"\n",(0,r.jsx)(n.h3,{id:"1-staged-testing-approach",children:"1. Staged Testing Approach"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Development"}),": Test IAP logic without actual store calls"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sandbox Testing"}),": Use store sandbox/test accounts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Internal Testing"}),": Test with real store in closed testing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Production"}),": Final verification in live environment"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-test-different-scenarios",children:"2. Test Different Scenarios"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gdscript",children:'# Test scenarios to cover:\nvar test_scenarios = [\n    "successful_purchase",\n    "user_cancelled",\n    "network_error",\n    "item_already_owned",\n    "product_unavailable",\n    "pending_purchase",\n    "restore_purchases"\n]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-device-testing-matrix",children:"3. Device Testing Matrix"}),"\n",(0,r.jsx)(n.p,{children:"Test on various devices:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS"}),": Different iPhone/iPad models, iOS versions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Android"}),": Different manufacturers, Android versions, Play Services versions"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-code-reference",children:"Error Code Reference"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Recommended Action"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"USER_CANCELED"})}),(0,r.jsx)(n.td,{children:"User cancelled purchase"}),(0,r.jsx)(n.td,{children:"No action needed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NETWORK_ERROR"})}),(0,r.jsx)(n.td,{children:"Network connectivity issue"}),(0,r.jsx)(n.td,{children:"Show retry option"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ITEM_UNAVAILABLE"})}),(0,r.jsx)(n.td,{children:"Product not available"}),(0,r.jsx)(n.td,{children:"Check product setup"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ITEM_ALREADY_OWNED"})}),(0,r.jsx)(n.td,{children:"User already owns product"}),(0,r.jsx)(n.td,{children:"Restore purchase"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ITEM_NOT_OWNED"})}),(0,r.jsx)(n.td,{children:"Item not owned"}),(0,r.jsx)(n.td,{children:"Check purchase status"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PAYMENT_INVALID"})}),(0,r.jsx)(n.td,{children:"Payment method issue"}),(0,r.jsx)(n.td,{children:"Direct to settings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PAYMENT_NOT_ALLOWED"})}),(0,r.jsx)(n.td,{children:"Payments disabled"}),(0,r.jsx)(n.td,{children:"Show message"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BILLING_UNAVAILABLE"})}),(0,r.jsx)(n.td,{children:"Store unavailable"}),(0,r.jsx)(n.td,{children:"Show retry later"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DEVELOPER_ERROR"})}),(0,r.jsx)(n.td,{children:"Configuration error"}),(0,r.jsx)(n.td,{children:"Check setup"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsx)(n.p,{children:"If you're still experiencing issues:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check logs"}),": Review device logs and console output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search issues"}),": Check the ",(0,r.jsx)(n.a,{href:"https://github.com/hyochan/godot-iap/issues",children:"GitHub issues"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Minimal reproduction"}),": Create a minimal example that reproduces the issue"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Report bug"}),": File a detailed issue with reproduction steps"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"bug-report-template",children:"Bug Report Template"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"**Environment:**\n- godot-iap version: x.x.x\n- Godot version: x.x.x\n- Platform: iOS/Android\n- OS version: x.x.x\n- Device: Device model\n\n**Description:**\nClear description of the issue\n\n**Steps to reproduce:**\n1. Step 1\n2. Step 2\n3. Step 3\n\n**Expected behavior:**\nWhat should happen\n\n**Actual behavior:**\nWhat actually happens\n\n**Logs:**\nRelevant logs and error messages\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./error-handling",children:"Error Handling Guide"})," - Error handling best practices"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./purchases",children:"Purchases Guide"})," - Purchase implementation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../api/",children:"API Reference"})," - Detailed method documentation"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},5159(e,n,s){s.d(n,{A:()=>o});s(6540);var i=s(6025),r=s(7856),t=s(4848);function o({title:e}){const n=(0,i.Ay)("/img/iapkit-banner.gif"),s=()=>{fetch(r.I,{method:"POST"}).catch(()=>{})};return(0,t.jsxs)("div",{style:{flex:1,marginTop:24,marginBottom:24},children:[(0,t.jsx)("a",{href:r.V,target:"_blank",rel:"noopener noreferrer",onClick:s,children:(0,t.jsx)("img",{src:n,alt:"IAPKit - In-App Purchase Solution",style:{display:"block",margin:"0 auto",objectFit:"contain"}})}),e?(0,t.jsx)("a",{href:r.V,target:"_blank",rel:"noopener noreferrer",onClick:s,style:{display:"block",fontSize:"0.875rem",color:"#666",textAlign:"center",marginTop:"8px",textDecoration:"none"},children:e}):null]})}},7856(e,n,s){s.d(n,{I:()=>r,V:()=>i});const i="https://iapkit.com",r="https://www.hyo.dev/api/ad-banner/cmju2uzzm0000yr9h3dhpflgy"},8453(e,n,s){s.d(n,{R:()=>o,x:()=>c});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);