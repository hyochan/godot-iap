"use strict";(globalThis.webpackChunkgodot_iap_docs=globalThis.webpackChunkgodot_iap_docs||[]).push([[280],{1437(n,e,i){i.d(e,{A:()=>t});i(6540);var r=i(7856),s=i(4848);function t({children:n,path:e=""}){return(0,s.jsx)("a",{href:`${r.V}${e}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{navigator.sendBeacon?navigator.sendBeacon(r.I):fetch(r.I,{method:"POST",keepalive:!0}).catch(()=>{})},children:n})}},5159(n,e,i){i.d(e,{A:()=>o});i(6540);var r=i(6025),s=i(7856),t=i(4848);function o({title:n}){const e=(0,r.Ay)("/img/iapkit-banner.gif"),i=()=>{fetch(s.I,{method:"POST"}).catch(()=>{})};return(0,t.jsxs)("div",{style:{flex:1,marginTop:24,marginBottom:24},children:[(0,t.jsx)("a",{href:s.V,target:"_blank",rel:"noopener noreferrer",onClick:i,children:(0,t.jsx)("img",{src:e,alt:"IAPKit - In-App Purchase Solution",style:{display:"block",margin:"0 auto",objectFit:"contain"}})}),n?(0,t.jsx)("a",{href:s.V,target:"_blank",rel:"noopener noreferrer",onClick:i,style:{display:"block",fontSize:"0.875rem",color:"#666",textAlign:"center",marginTop:"8px",textDecoration:"none"},children:n}):null]})}},5931(n,e,i){i.r(e),i.d(e,{assets:()=>p,contentTitle:()=>u,default:()=>_,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"examples/subscription-flow","title":"Subscription Flow","description":"This example demonstrates how to implement subscription purchases with proper offer handling for both iOS and Android using the type-safe API.","source":"@site/docs/examples/subscription-flow.md","sourceDirName":"examples","slug":"/examples/subscription-flow","permalink":"/godot-iap/examples/subscription-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/godot-iap/tree/main/docs/docs/examples/subscription-flow.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Subscription Flow","sidebar_label":"Subscription Flow","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Purchase Flow","permalink":"/godot-iap/examples/purchase-flow"},"next":{"title":"Available Purchases","permalink":"/godot-iap/examples/available-purchases"}}');var s=i(4848),t=i(8453),o=i(5159),a=i(1437);const c={title:"Subscription Flow",sidebar_label:"Subscription Flow",sidebar_position:2},u="Subscription Flow Example",p={},d=[{value:"Overview",id:"overview",level:2},{value:"Complete Implementation",id:"complete-implementation",level:2},{value:"SubscriptionManager.gd",id:"subscriptionmanagergd",level:3},{value:"SubscriptionUI.gd",id:"subscriptionuigd",level:3},{value:"Offer Selection (Android)",id:"offer-selection-android",level:3},{value:"Testing",id:"testing",level:2},{value:"iOS Sandbox Testing",id:"ios-sandbox-testing",level:3},{value:"Android Testing",id:"android-testing",level:3},{value:"Server-Side Verification",id:"server-side-verification",level:2},{value:"See Also",id:"see-also",level:2}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"subscription-flow-example",children:"Subscription Flow Example"})}),"\n",(0,s.jsx)(o.A,{}),"\n",(0,s.jsxs)(e.p,{children:["This example demonstrates how to implement subscription purchases with proper offer handling for both iOS and Android using the ",(0,s.jsx)(e.strong,{children:"type-safe API"}),"."]}),"\n",(0,s.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(e.p,{children:"This example covers:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Fetching subscription products with offer details"}),"\n",(0,s.jsx)(e.li,{children:"Displaying subscription options to users"}),"\n",(0,s.jsx)(e.li,{children:"Handling platform-specific offer requirements"}),"\n",(0,s.jsx)(e.li,{children:"Managing subscription status"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"complete-implementation",children:"Complete Implementation"}),"\n",(0,s.jsx)(e.h3,{id:"subscriptionmanagergd",children:"SubscriptionManager.gd"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-gdscript",children:'# subscription_manager.gd\nextends Node\n\nconst Types = preload("res://addons/godot-iap/types.gd")\n\n@onready var iap = $GodotIapWrapper\n\nvar subscriptions: Array = []\nvar is_connected: bool = false\n\n# Subscription IDs\nconst SUBSCRIPTION_IDS = {\n    "monthly": "com.yourgame.premium_monthly",\n    "yearly": "com.yourgame.premium_yearly"\n}\n\nsignal subscriptions_loaded(subscriptions: Array)\nsignal subscription_purchased(subscription_id: String)\nsignal subscription_error(error: Dictionary)\nsignal subscription_status_changed(is_active: bool)\n\nfunc _ready():\n    _initialize()\n\nfunc _initialize():\n    # Connect signals\n    iap.purchase_updated.connect(_on_purchase_updated)\n    iap.purchase_error.connect(_on_purchase_error)\n    iap.products_fetched.connect(_on_products_fetched)\n    iap.connected.connect(_on_connected)\n\n    # Initialize connection\n    is_connected = iap.init_connection()\n\n    if is_connected:\n        _check_subscription_status()\n        _load_subscriptions()\n\nfunc _on_connected():\n    is_connected = true\n    _check_subscription_status()\n    _load_subscriptions()\n\nfunc _load_subscriptions():\n    var request = Types.ProductRequest.new()\n    var skus: Array[String] = []\n    for sku in SUBSCRIPTION_IDS.values():\n        skus.append(sku)\n    request.skus = skus\n    request.type = Types.ProductQueryType.SUBS\n\n    # Returns Array of Types.ProductAndroid or Types.ProductIOS\n    subscriptions = iap.fetch_products(request)\n\n    for sub in subscriptions:\n        print("Subscription: ", sub.id)\n        _print_subscription_details(sub)\n\n    subscriptions_loaded.emit(subscriptions)\n\nfunc _check_subscription_status():\n    # Returns Array of typed purchase objects\n    var purchases = iap.get_available_purchases()\n\n    for purchase in purchases:\n        if _is_subscription(purchase.product_id):\n            if _is_subscription_active_typed(purchase):\n                GameState.set_premium(true)\n                subscription_status_changed.emit(true)\n                return\n\n    GameState.set_premium(false)\n    subscription_status_changed.emit(false)\n\n# Signal handlers\nfunc _on_products_fetched(result: Dictionary):\n    # iOS async callback\n    if result.has("products"):\n        subscriptions.clear()\n        for product_dict in result["products"]:\n            subscriptions.append(product_dict)\n        subscriptions_loaded.emit(subscriptions)\n\nfunc _on_purchase_updated(purchase: Dictionary):\n    var product_id = purchase.get("productId", "")\n\n    if not _is_subscription(product_id):\n        return\n\n    var state = purchase.get("purchaseState", "")\n\n    if state == "purchased" or state == "Purchased":\n        await _process_subscription_purchase(purchase)\n\nfunc _on_purchase_error(error: Dictionary):\n    var code = error.get("code", "")\n    if code != "USER_CANCELED":\n        subscription_error.emit(error)\n\nfunc _process_subscription_purchase(purchase: Dictionary):\n    # Verify on server\n    var is_valid = await _verify_subscription(purchase)\n\n    if not is_valid:\n        print("Subscription verification failed")\n        return\n\n    # Grant premium access\n    GameState.set_premium(true)\n\n    # Finish transaction\n    var result = iap.finish_transaction_dict(purchase, false)\n    if result.success:\n        print("Subscription transaction finished")\n\n    subscription_purchased.emit(purchase.get("productId", ""))\n    subscription_status_changed.emit(true)\n\n# Public API\nfunc purchase_subscription(subscription_id: String):\n    if not is_connected:\n        push_error("Not connected to store")\n        return\n\n    var subscription = _find_subscription(subscription_id)\n    if not subscription:\n        push_error("Subscription not found: ", subscription_id)\n        return\n\n    var props = Types.RequestPurchaseProps.new()\n    props.request = Types.RequestPurchasePropsByPlatforms.new()\n    props.type = Types.ProductQueryType.SUBS\n\n    # Android configuration\n    props.request.google = Types.RequestPurchaseAndroidProps.new()\n    var skus: Array[String] = [subscription_id]\n    props.request.google.skus = skus\n\n    # Android: Must include offer token for subscriptions\n    if OS.get_name() == "Android":\n        var offers = _get_subscription_offers(subscription)\n        if offers.size() == 0:\n            push_error("No subscription offers available")\n            return\n\n        # Use first offer (or let user choose)\n        var sub_offers: Array[Types.SubscriptionOfferAndroid] = []\n        var offer = Types.SubscriptionOfferAndroid.new()\n        offer.sku = subscription_id\n        offer.offer_token = offers[0].get("offerToken", "")\n        sub_offers.append(offer)\n        props.request.google.subscription_offers = sub_offers\n\n    # iOS configuration\n    props.request.apple = Types.RequestPurchaseIOSProps.new()\n    props.request.apple.sku = subscription_id\n\n    iap.request_purchase(props)\n\nfunc purchase_subscription_with_offer(subscription_id: String, offer_index: int):\n    """Purchase with a specific offer (Android only)"""\n    if OS.get_name() != "Android":\n        purchase_subscription(subscription_id)\n        return\n\n    var subscription = _find_subscription(subscription_id)\n    if not subscription:\n        return\n\n    var offers = _get_subscription_offers(subscription)\n    if offer_index >= offers.size():\n        push_error("Invalid offer index")\n        return\n\n    var props = Types.RequestPurchaseProps.new()\n    props.request = Types.RequestPurchasePropsByPlatforms.new()\n    props.type = Types.ProductQueryType.SUBS\n\n    props.request.google = Types.RequestPurchaseAndroidProps.new()\n    var skus: Array[String] = [subscription_id]\n    props.request.google.skus = skus\n\n    var sub_offers: Array[Types.SubscriptionOfferAndroid] = []\n    var offer = Types.SubscriptionOfferAndroid.new()\n    offer.sku = subscription_id\n    offer.offer_token = offers[offer_index].get("offerToken", "")\n    sub_offers.append(offer)\n    props.request.google.subscription_offers = sub_offers\n\n    props.request.apple = Types.RequestPurchaseIOSProps.new()\n    props.request.apple.sku = subscription_id\n\n    iap.request_purchase(props)\n\nfunc restore_subscriptions() -> bool:\n    if not is_connected:\n        return false\n\n    var purchases = iap.get_available_purchases()\n    var found_active = false\n\n    for purchase in purchases:\n        if _is_subscription(purchase.product_id):\n            if _is_subscription_active_typed(purchase):\n                GameState.set_premium(true)\n                found_active = true\n\n    subscription_status_changed.emit(found_active)\n    return found_active\n\nfunc manage_subscriptions():\n    """Open subscription management in platform settings"""\n    var options = Types.DeepLinkOptions.new()\n\n    if OS.get_name() == "Android":\n        options.package_name_android = ProjectSettings.get_setting(\n            "application/config/package_name"\n        )\n\n    iap.deep_link_to_subscriptions(options)\n\nfunc get_subscription_price(subscription_id: String) -> String:\n    var subscription = _find_subscription(subscription_id)\n    if not subscription:\n        return "$9.99"\n\n    # Access typed property\n    if subscription is Object:\n        return subscription.display_price if subscription.display_price else "$9.99"\n\n    # Dictionary fallback\n    if OS.get_name() == "iOS":\n        return subscription.get("displayPrice", "$9.99")\n\n    elif OS.get_name() == "Android":\n        var offers = subscription.get("subscriptionOfferDetailsAndroid", [])\n        if offers.size() > 0:\n            var phases = offers[0].get("pricingPhases", {})\n            var phase_list = phases.get("pricingPhaseList", [])\n            if phase_list.size() > 0:\n                return phase_list[0].get("formattedPrice", "$9.99")\n\n    return "$9.99"\n\nfunc get_subscription_offers(subscription_id: String) -> Array:\n    """Get all available offers for a subscription (Android)"""\n    var subscription = _find_subscription(subscription_id)\n    if not subscription:\n        return []\n\n    return _get_subscription_offers(subscription)\n\nfunc has_free_trial(subscription_id: String) -> bool:\n    var subscription = _find_subscription(subscription_id)\n    if not subscription:\n        return false\n\n    if OS.get_name() == "iOS":\n        # Check typed property for iOS\n        if subscription is Object and "subscription_info" in subscription:\n            var sub_info = subscription.subscription_info\n            if sub_info and sub_info.introductory_offer:\n                return sub_info.introductory_offer.payment_mode == "free-trial"\n        # Dictionary fallback\n        var sub_info = subscription.get("subscriptionInfoIOS", {})\n        var intro = sub_info.get("introductoryOffer", null)\n        if intro:\n            return intro.get("paymentMode", "") == "free-trial"\n\n    elif OS.get_name() == "Android":\n        var offers = _get_subscription_offers(subscription)\n        for offer in offers:\n            var phases = offer.get("pricingPhases", {}).get("pricingPhaseList", [])\n            for phase in phases:\n                if phase.get("priceAmountMicros", 1) == 0:\n                    return true\n\n    return false\n\n# Helper functions\nfunc _find_subscription(subscription_id: String):\n    for sub in subscriptions:\n        var sub_id = sub.id if sub is Object else sub.get("id", sub.get("productId", ""))\n        if sub_id == subscription_id:\n            return sub\n    return null\n\nfunc _get_subscription_offers(subscription) -> Array:\n    if subscription is Object:\n        # Typed object\n        if "subscription_offer_details" in subscription:\n            return subscription.subscription_offer_details\n    # Dictionary\n    return subscription.get("subscriptionOfferDetailsAndroid", [])\n\nfunc _is_subscription(product_id: String) -> bool:\n    return product_id in SUBSCRIPTION_IDS.values()\n\nfunc _is_subscription_active_typed(purchase) -> bool:\n    var current_time = Time.get_unix_time_from_system() * 1000\n\n    if OS.get_name() == "iOS":\n        var expiration = 0\n        if purchase is Object:\n            expiration = purchase.expiration_date if "expiration_date" in purchase else 0\n        else:\n            expiration = purchase.get("expirationDateIOS", 0)\n\n        if expiration > 0:\n            return expiration > current_time\n\n        # Sandbox: Consider recent purchases as active\n        var environment = ""\n        var tx_date = 0\n        if purchase is Object:\n            environment = purchase.environment if "environment" in purchase else ""\n            tx_date = purchase.transaction_date if "transaction_date" in purchase else 0\n        else:\n            environment = purchase.get("environmentIOS", "")\n            tx_date = purchase.get("transactionDate", 0)\n\n        if environment == "Sandbox":\n            var day_ms = 24 * 60 * 60 * 1000\n            return (current_time - tx_date) < day_ms\n\n    elif OS.get_name() == "Android":\n        var auto_renewing = null\n        var purchase_state = ""\n        if purchase is Object:\n            auto_renewing = purchase.auto_renewing if "auto_renewing" in purchase else null\n            purchase_state = purchase.purchase_state if "purchase_state" in purchase else ""\n        else:\n            auto_renewing = purchase.get("autoRenewingAndroid", null)\n            purchase_state = purchase.get("purchaseState", "")\n\n        if auto_renewing != null:\n            return auto_renewing\n\n        if purchase_state == "purchased" or purchase_state == "Purchased":\n            return true\n\n    return false\n\nfunc _verify_subscription(purchase: Dictionary) -> bool:\n    # For development, return true\n    # For production, use IAPKit for server-side verification\n    if OS.is_debug_build():\n        return true\n\n    # Production: Verify with IAPKit\n    return await _verify_with_iapkit(purchase)\n\nfunc _verify_with_iapkit(purchase: Dictionary) -> bool:\n    var http = HTTPRequest.new()\n    add_child(http)\n\n    var headers = [\n        "Content-Type: application/json",\n        "Authorization: Bearer YOUR_IAPKIT_API_KEY"  # Get from iapkit.com\n    ]\n\n    var body = {}\n    if OS.get_name() == "iOS":\n        body = { "apple": { "jws": purchase.get("purchaseToken", "") } }\n    elif OS.get_name() == "Android":\n        body = { "google": { "purchaseToken": purchase.get("purchaseToken", "") } }\n\n    http.request(\n        "https://api.iapkit.com/v1/verify",\n        headers,\n        HTTPClient.METHOD_POST,\n        JSON.stringify(body)\n    )\n\n    var response = await http.request_completed\n    http.queue_free()\n\n    if response[1] != 200:\n        return false\n\n    var result = JSON.parse_string(response[3].get_string_from_utf8())\n    if result is Dictionary:\n        var state = result.get("state", "")\n        # For subscriptions, check entitled or active states\n        return state == "entitled"\n\n    return false\n\nfunc _print_subscription_details(subscription):\n    var title = subscription.title if subscription is Object else subscription.get("title", "")\n    var sub_id = subscription.id if subscription is Object else subscription.get("id", "")\n\n    print("  Title: ", title)\n    print("  Price: ", get_subscription_price(sub_id))\n\n    if OS.get_name() == "iOS":\n        # Check for intro offer\n        if has_free_trial(sub_id):\n            print("  Free trial available!")\n\n    elif OS.get_name() == "Android":\n        var offers = _get_subscription_offers(subscription)\n        print("  Offers: ", offers.size())\n        for i in range(offers.size()):\n            var offer = offers[i]\n            var offer_id = offer.get("offerId", "Base Plan")\n            print("    [%d] %s" % [i, offer_id if offer_id else "Base Plan"])\n'})}),"\n",(0,s.jsx)(e.h3,{id:"subscriptionuigd",children:"SubscriptionUI.gd"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-gdscript",children:'# subscription_ui.gd\nextends Control\n\n@onready var monthly_button: Button = $MonthlyButton\n@onready var yearly_button: Button = $YearlyButton\n@onready var restore_button: Button = $RestoreButton\n@onready var manage_button: Button = $ManageButton\n@onready var status_label: Label = $StatusLabel\n@onready var trial_label: Label = $TrialLabel\n\nfunc _ready():\n    # Connect to SubscriptionManager\n    SubscriptionManager.subscriptions_loaded.connect(_on_subscriptions_loaded)\n    SubscriptionManager.subscription_purchased.connect(_on_subscription_purchased)\n    SubscriptionManager.subscription_error.connect(_on_subscription_error)\n    SubscriptionManager.subscription_status_changed.connect(_on_status_changed)\n\n    # Connect buttons\n    monthly_button.pressed.connect(_on_monthly_pressed)\n    yearly_button.pressed.connect(_on_yearly_pressed)\n    restore_button.pressed.connect(_on_restore_pressed)\n    manage_button.pressed.connect(_on_manage_pressed)\n\n    # Initial state\n    _update_ui()\n\nfunc _on_subscriptions_loaded(subscriptions: Array):\n    # Update button prices\n    monthly_button.text = "Monthly - %s" % SubscriptionManager.get_subscription_price(\n        SubscriptionManager.SUBSCRIPTION_IDS.monthly\n    )\n\n    yearly_button.text = "Yearly - %s" % SubscriptionManager.get_subscription_price(\n        SubscriptionManager.SUBSCRIPTION_IDS.yearly\n    )\n\n    # Check for free trial\n    if SubscriptionManager.has_free_trial(SubscriptionManager.SUBSCRIPTION_IDS.monthly):\n        trial_label.text = "Free trial available!"\n        trial_label.show()\n    else:\n        trial_label.hide()\n\nfunc _on_subscription_purchased(subscription_id: String):\n    _set_buttons_enabled(true)\n    _update_ui()\n    _show_dialog("Success", "Subscription activated!")\n\nfunc _on_subscription_error(error: Dictionary):\n    _set_buttons_enabled(true)\n    _show_dialog("Error", error.get("message", "Subscription failed"))\n\nfunc _on_status_changed(is_active: bool):\n    _update_ui()\n\nfunc _on_monthly_pressed():\n    _set_buttons_enabled(false)\n    SubscriptionManager.purchase_subscription(\n        SubscriptionManager.SUBSCRIPTION_IDS.monthly\n    )\n\nfunc _on_yearly_pressed():\n    _set_buttons_enabled(false)\n    SubscriptionManager.purchase_subscription(\n        SubscriptionManager.SUBSCRIPTION_IDS.yearly\n    )\n\nfunc _on_restore_pressed():\n    _set_buttons_enabled(false)\n    var restored = await SubscriptionManager.restore_subscriptions()\n    _set_buttons_enabled(true)\n\n    if restored:\n        _show_dialog("Restored", "Subscription restored successfully!")\n    else:\n        _show_dialog("Not Found", "No active subscription found.")\n\nfunc _on_manage_pressed():\n    SubscriptionManager.manage_subscriptions()\n\nfunc _update_ui():\n    var is_premium = GameState.is_premium\n\n    if is_premium:\n        status_label.text = "Premium Active"\n        monthly_button.hide()\n        yearly_button.hide()\n        manage_button.show()\n    else:\n        status_label.text = "Free Account"\n        monthly_button.show()\n        yearly_button.show()\n        manage_button.hide()\n\nfunc _set_buttons_enabled(enabled: bool):\n    monthly_button.disabled = not enabled\n    yearly_button.disabled = not enabled\n    restore_button.disabled = not enabled\n\nfunc _show_dialog(title: String, message: String):\n    var dialog = AcceptDialog.new()\n    dialog.title = title\n    dialog.dialog_text = message\n    add_child(dialog)\n    dialog.popup_centered()\n    dialog.confirmed.connect(dialog.queue_free)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"offer-selection-android",children:"Offer Selection (Android)"}),"\n",(0,s.jsx)(e.p,{children:"For apps that want to let users choose between different offers:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-gdscript",children:'# offer_selection_ui.gd\nextends Control\n\n@onready var offer_container: VBoxContainer = $OfferContainer\n\nvar subscription_id: String = ""\n\nfunc show_offers(sub_id: String):\n    subscription_id = sub_id\n    _display_offers()\n\nfunc _display_offers():\n    # Clear existing\n    for child in offer_container.get_children():\n        child.queue_free()\n\n    # Get offers\n    var offers = SubscriptionManager.get_subscription_offers(subscription_id)\n\n    for i in range(offers.size()):\n        var offer = offers[i]\n        var button = Button.new()\n        button.text = _format_offer(offer)\n        button.pressed.connect(func(): _on_offer_selected(i))\n        offer_container.add_child(button)\n\nfunc _format_offer(offer: Dictionary) -> String:\n    var offer_id = offer.get("offerId", null)\n    var phases = offer.get("pricingPhases", {}).get("pricingPhaseList", [])\n\n    var text = "Base Plan" if not offer_id else offer_id\n\n    if phases.size() > 0:\n        var price = phases[0].get("formattedPrice", "")\n        var period = phases[0].get("billingPeriod", "")\n        text += " - %s / %s" % [price, _format_period(period)]\n\n    return text\n\nfunc _format_period(iso_period: String) -> String:\n    match iso_period:\n        "P1M": return "month"\n        "P1Y": return "year"\n        "P1W": return "week"\n        _: return iso_period\n\nfunc _on_offer_selected(offer_index: int):\n    SubscriptionManager.purchase_subscription_with_offer(subscription_id, offer_index)\n    hide()\n'})}),"\n",(0,s.jsx)(e.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(e.h3,{id:"ios-sandbox-testing",children:"iOS Sandbox Testing"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Create sandbox accounts in App Store Connect"}),"\n",(0,s.jsxs)(e.li,{children:["Configure subscription durations for testing:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Monthly \u2192 5 minutes in sandbox"}),"\n",(0,s.jsx)(e.li,{children:"Yearly \u2192 1 hour in sandbox"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"Test subscription lifecycle (purchase, renewal, expiration)"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"android-testing",children:"Android Testing"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Add test accounts in Google Play Console \u2192 License testing"}),"\n",(0,s.jsx)(e.li,{children:"Upload signed build to internal testing track"}),"\n",(0,s.jsx)(e.li,{children:"Test subscriptions won't charge real money"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"server-side-verification",children:"Server-Side Verification"}),"\n",(0,s.jsxs)(e.p,{children:["For production apps, we recommend using ",(0,s.jsx)(a.A,{children:"IAPKit"})," for server-side subscription verification. The example above includes ",(0,s.jsx)(e.code,{children:"_verify_with_iapkit()"})," which validates subscriptions through IAPKit's API."]}),"\n",(0,s.jsx)(e.p,{children:"IAPKit provides:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Subscription status tracking"})," with automatic renewal detection"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Grace period handling"})," for billing issues"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Cross-platform verification"})," for iOS and Android"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Get your API key at ",(0,s.jsx)(a.A,{children:"iapkit.com"}),"."]}),"\n",(0,s.jsx)(e.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../guides/subscription-offers",children:"Subscription Offers Guide"})," - Detailed offer documentation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"./purchase-flow",children:"Purchase Flow Example"})," - Basic purchase implementation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../api/methods/ios-specific",children:"iOS-Specific Methods"})," - iOS subscription APIs"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../api/methods/android-specific",children:"Android-Specific Methods"})," - Android subscription APIs"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(a.A,{children:"IAPKit Dashboard"})," - Server-side verification service"]}),"\n"]})]})}function _(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},7856(n,e,i){i.d(e,{I:()=>s,V:()=>r});const r="https://iapkit.com",s="https://www.hyo.dev/api/ad-banner/cmju2uzzm0000yr9h3dhpflgy"},8453(n,e,i){i.d(e,{R:()=>o,x:()=>a});var r=i(6540);const s={},t=r.createContext(s);function o(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);