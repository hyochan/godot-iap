"use strict";(globalThis.webpackChunkgodot_iap_docs=globalThis.webpackChunkgodot_iap_docs||[]).push([[943],{5159(e,r,s){s.d(r,{A:()=>d});s(6540);var n=s(6025),c=s(7856),i=s(4848);function d({title:e}){const r=(0,n.Ay)("/img/iapkit-banner.gif"),s=()=>{fetch(c.I,{method:"POST"}).catch(()=>{})};return(0,i.jsxs)("div",{style:{flex:1,marginTop:24,marginBottom:24},children:[(0,i.jsx)("a",{href:c.V,target:"_blank",rel:"noopener noreferrer",onClick:s,children:(0,i.jsx)("img",{src:r,alt:"IAPKit - In-App Purchase Solution",style:{display:"block",margin:"0 auto",objectFit:"contain"}})}),e?(0,i.jsx)("a",{href:c.V,target:"_blank",rel:"noopener noreferrer",onClick:s,style:{display:"block",fontSize:"0.875rem",color:"#666",textAlign:"center",marginTop:"8px",textDecoration:"none"},children:e}):null]})}},5489(e,r,s){s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"api/methods/core-methods","title":"Core Methods","description":"Core methods available on both iOS and Android platforms. All methods use typed parameters and return typed objects.","source":"@site/docs/api/methods/core-methods.md","sourceDirName":"api/methods","slug":"/api/methods/core-methods","permalink":"/godot-iap/api/methods/core-methods","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/godot-iap/tree/main/docs/docs/api/methods/core-methods.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"API Reference","permalink":"/godot-iap/api/"},"next":{"title":"Unified APIs","permalink":"/godot-iap/api/methods/unified-apis"}}');var c=s(4848),i=s(8453),d=s(5159);const t={sidebar_position:1},o="Core Methods",a={},l=[{value:"Setup",id:"setup",level:2},{value:"Connection Methods",id:"connection-methods",level:2},{value:"init_connection",id:"init_connection",level:3},{value:"end_connection",id:"end_connection",level:3},{value:"Product Methods",id:"product-methods",level:2},{value:"fetch_products",id:"fetch_products",level:3},{value:"Purchase Methods",id:"purchase-methods",level:2},{value:"request_purchase",id:"request_purchase",level:3},{value:"finish_transaction",id:"finish_transaction",level:3},{value:"get_available_purchases",id:"get_available_purchases",level:3},{value:"restore_purchases",id:"restore_purchases",level:3},{value:"Subscription Methods",id:"subscription-methods",level:2},{value:"get_active_subscriptions",id:"get_active_subscriptions",level:3},{value:"has_active_subscriptions",id:"has_active_subscriptions",level:3},{value:"Signal Handlers",id:"signal-handlers",level:2},{value:"purchase_updated",id:"purchase_updated",level:3},{value:"purchase_error",id:"purchase_error",level:3},{value:"products_fetched",id:"products_fetched",level:3}];function h(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.header,{children:(0,c.jsx)(r.h1,{id:"core-methods",children:"Core Methods"})}),"\n",(0,c.jsx)(d.A,{}),"\n",(0,c.jsx)(r.p,{children:"Core methods available on both iOS and Android platforms. All methods use typed parameters and return typed objects."}),"\n",(0,c.jsx)(r.h2,{id:"setup",children:"Setup"}),"\n",(0,c.jsxs)(r.p,{children:["Add ",(0,c.jsx)(r.code,{children:"GodotIapWrapper"})," as a child node in your scene, then reference it in your script:"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'extends Node\n\n# Load OpenIAP types\nconst Types = preload("res://addons/godot-iap/types.gd")\n\n# Reference to GodotIapWrapper node\n@onready var iap = $GodotIapWrapper\n\n# Throughout this documentation, we use `iap` to reference the wrapper.\n# You can also use any variable name you prefer.\n'})}),"\n",(0,c.jsx)(r.admonition,{title:"GodotIapPlugin Reference",type:"info",children:(0,c.jsxs)(r.p,{children:["In the examples below, ",(0,c.jsx)(r.code,{children:"GodotIapPlugin"})," refers to your reference to the ",(0,c.jsx)(r.code,{children:"GodotIapWrapper"})," node.\nReplace it with your own variable name (e.g., ",(0,c.jsx)(r.code,{children:"iap"}),", ",(0,c.jsx)(r.code,{children:"$GodotIapWrapper"}),", or ",(0,c.jsx)(r.code,{children:"IapManager"})," if using an autoload)."]})}),"\n",(0,c.jsx)(r.h2,{id:"connection-methods",children:"Connection Methods"}),"\n",(0,c.jsx)(r.h3,{id:"init_connection",children:"init_connection"}),"\n",(0,c.jsx)(r.p,{children:"Initialize the billing connection. Must be called before any other IAP operations."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func init_connection() -> bool\n"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"bool"})," - ",(0,c.jsx)(r.code,{children:"true"})," if connection successful"]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _ready():\n    GodotIapPlugin.purchase_updated.connect(_on_purchase_updated)\n    GodotIapPlugin.purchase_error.connect(_on_purchase_error)\n\n    if GodotIapPlugin.init_connection():\n        print("IAP connection initialized")\n        _fetch_products()\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"end_connection",children:"end_connection"}),"\n",(0,c.jsx)(r.p,{children:"End the billing connection. Call when your app no longer needs IAP functionality."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func end_connection() -> Types.VoidResult\n"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Types.VoidResult"})," with ",(0,c.jsx)(r.code,{children:"success"})," boolean"]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _exit_tree():\n    var result = GodotIapPlugin.end_connection()\n    if result.success:\n        print("Connection ended")\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"product-methods",children:"Product Methods"}),"\n",(0,c.jsx)(r.h3,{id:"fetch_products",children:"fetch_products"}),"\n",(0,c.jsx)(r.p,{children:"Fetch product details from the store. Returns an array of typed product objects."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func fetch_products(request: Types.ProductRequest) -> Array\n"})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Parameter"}),(0,c.jsx)(r.th,{children:"Type"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsx)(r.tbody,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"request"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Types.ProductRequest"})}),(0,c.jsx)(r.td,{children:"Product request with SKUs and type"})]})})]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Array"})," of ",(0,c.jsx)(r.code,{children:"Types.ProductAndroid"})," (Android) or ",(0,c.jsx)(r.code,{children:"Types.ProductIOS"})," (iOS)"]}),"\n",(0,c.jsx)(r.admonition,{title:"Platform-Specific Types",type:"info",children:(0,c.jsxs)(r.p,{children:["GDScript doesn't support Union types. The returned array contains either ",(0,c.jsx)(r.code,{children:"ProductAndroid"})," or ",(0,c.jsx)(r.code,{children:"ProductIOS"})," objects depending on the platform. Both share common properties like ",(0,c.jsx)(r.code,{children:"id"}),", ",(0,c.jsx)(r.code,{children:"title"}),", and ",(0,c.jsx)(r.code,{children:"display_price"}),"."]})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _fetch_products():\n    var request = Types.ProductRequest.new()\n    request.skus = ["coins_100", "coins_500", "remove_ads"]\n    request.type = Types.ProductQueryType.ALL\n\n    var products = GodotIapPlugin.fetch_products(request)\n    for product in products:\n        # Access typed properties directly\n        print("Product: %s - %s" % [product.id, product.display_price])\n        print("  Title: %s" % product.title)\n        print("  Description: %s" % product.description)\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"purchase-methods",children:"Purchase Methods"}),"\n",(0,c.jsx)(r.h3,{id:"request_purchase",children:"request_purchase"}),"\n",(0,c.jsx)(r.p,{children:"Request a purchase for a product."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func request_purchase(props: Types.RequestPurchaseProps) -> Variant\n"})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Parameter"}),(0,c.jsx)(r.th,{children:"Type"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsx)(r.tbody,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"props"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Types.RequestPurchaseProps"})}),(0,c.jsx)(r.td,{children:"Purchase request with platform-specific options"})]})})]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Variant"})," - ",(0,c.jsx)(r.code,{children:"Types.PurchaseAndroid"}),", ",(0,c.jsx)(r.code,{children:"Types.PurchaseIOS"}),", or ",(0,c.jsx)(r.code,{children:"null"})]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func purchase_product(product_id: String):\n    var props = Types.RequestPurchaseProps.new()\n    props.request = Types.RequestPurchasePropsByPlatforms.new()\n\n    # Android configuration\n    props.request.google = Types.RequestPurchaseAndroidProps.new()\n    props.request.google.skus = [product_id]\n\n    # iOS configuration\n    props.request.apple = Types.RequestPurchaseIosProps.new()\n    props.request.apple.sku = product_id\n\n    props.type = Types.ProductQueryType.IN_APP\n\n    var purchase = GodotIapPlugin.request_purchase(props)\n    if purchase:\n        print("Purchase initiated: ", purchase.product_id)\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"finish_transaction",children:"finish_transaction"}),"\n",(0,c.jsxs)(r.p,{children:["Finish a transaction after processing. ",(0,c.jsx)(r.strong,{children:"Must be called for every successful purchase."})]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func finish_transaction(purchase: Types.PurchaseInput, is_consumable: bool) -> Types.VoidResult\n"})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Parameter"}),(0,c.jsx)(r.th,{children:"Type"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"purchase"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Types.PurchaseInput"})}),(0,c.jsx)(r.td,{children:"Purchase to finish"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"is_consumable"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"bool"})}),(0,c.jsx)(r.td,{children:"Whether the product is consumable"})]})]})]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Types.VoidResult"})]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _on_purchase_updated(purchase: Dictionary):\n    if purchase.get("purchaseState") == "Purchased":\n        # Verify on server first (recommended)\n        var verified = await verify_on_server(purchase)\n        if verified:\n            var purchase_input = Types.PurchaseInput.from_dict(purchase)\n            var is_consumable = _is_consumable_product(purchase.get("productId", ""))\n            var result = GodotIapPlugin.finish_transaction(purchase_input, is_consumable)\n            if result.success:\n                print("Transaction finished")\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"get_available_purchases",children:"get_available_purchases"}),"\n",(0,c.jsx)(r.p,{children:"Get all available (unfinished) purchases."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func get_available_purchases() -> Array\n"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Array"})," of ",(0,c.jsx)(r.code,{children:"Types.PurchaseAndroid"})," (Android) or ",(0,c.jsx)(r.code,{children:"Types.PurchaseIOS"})," (iOS)"]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func restore_purchases():\n    var purchases = GodotIapPlugin.get_available_purchases()\n    for purchase in purchases:\n        # Access typed properties\n        print("Found purchase: %s" % purchase.product_id)\n        await process_purchase(purchase)\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"restore_purchases",children:"restore_purchases"}),"\n",(0,c.jsx)(r.p,{children:"Restore previous purchases. Useful for non-consumable products and subscriptions."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func restore_purchases() -> Types.VoidResult\n"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Types.VoidResult"})]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _on_restore_pressed():\n    var result = GodotIapPlugin.restore_purchases()\n    if result.success:\n        print("Restore initiated - results come through purchase_updated signal")\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"subscription-methods",children:"Subscription Methods"}),"\n",(0,c.jsx)(r.h3,{id:"get_active_subscriptions",children:"get_active_subscriptions"}),"\n",(0,c.jsx)(r.p,{children:"Get active subscriptions for given IDs."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func get_active_subscriptions(subscription_ids: Array[String] = []) -> Array\n"})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Parameter"}),(0,c.jsx)(r.th,{children:"Type"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsx)(r.tbody,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"subscription_ids"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Array[String]"})}),(0,c.jsx)(r.td,{children:"Subscription IDs (empty for all)"})]})})]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"Array"})," of ",(0,c.jsx)(r.code,{children:"Types.ActiveSubscription"})]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func check_premium_status() -> bool:\n    var ids: Array[String] = ["premium_monthly", "premium_yearly"]\n    var active_subs = GodotIapPlugin.get_active_subscriptions(ids)\n    return active_subs.size() > 0\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"has_active_subscriptions",children:"has_active_subscriptions"}),"\n",(0,c.jsx)(r.p,{children:"Check if user has any active subscriptions."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:"func has_active_subscriptions(subscription_ids: Array[String] = []) -> bool\n"})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Parameter"}),(0,c.jsx)(r.th,{children:"Type"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsx)(r.tbody,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"subscription_ids"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Array[String]"})}),(0,c.jsx)(r.td,{children:"Subscription IDs (empty for all)"})]})})]}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.strong,{children:"Returns:"})," ",(0,c.jsx)(r.code,{children:"bool"})]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Example:"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func is_premium() -> bool:\n    var ids: Array[String] = ["premium_monthly", "premium_yearly"]\n    return GodotIapPlugin.has_active_subscriptions(ids)\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"signal-handlers",children:"Signal Handlers"}),"\n",(0,c.jsx)(r.h3,{id:"purchase_updated",children:"purchase_updated"}),"\n",(0,c.jsx)(r.p,{children:"Emitted when a purchase is updated."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _on_purchase_updated(purchase: Dictionary):\n    var product_id = purchase.get("productId", "")\n    var state = purchase.get("purchaseState", "")\n\n    match state:\n        "Purchased", "purchased":\n            await handle_successful_purchase(purchase)\n        "Pending", "pending":\n            show_pending_message(product_id)\n        _:\n            show_error_message()\n'})}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Purchase Dictionary Fields:"})}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Field"}),(0,c.jsx)(r.th,{children:"Type"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"id"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"String"})}),(0,c.jsx)(r.td,{children:"Unique purchase ID"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"productId"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"String"})}),(0,c.jsx)(r.td,{children:"Product identifier"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"transactionId"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"String"})}),(0,c.jsx)(r.td,{children:"Transaction identifier"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"purchaseState"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"String"})}),(0,c.jsx)(r.td,{children:'"Purchased", "Pending", etc.'})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"transactionDate"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"int"})}),(0,c.jsx)(r.td,{children:"Purchase timestamp"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"platform"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"String"})}),(0,c.jsx)(r.td,{children:'"ios" or "android"'})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"purchaseToken"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"String"})}),(0,c.jsx)(r.td,{children:"(Android) Purchase token"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"isAcknowledged"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"bool"})}),(0,c.jsx)(r.td,{children:"(Android) Whether acknowledged"})]})]})]}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"purchase_error",children:"purchase_error"}),"\n",(0,c.jsx)(r.p,{children:"Emitted when a purchase error occurs."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _on_purchase_error(error: Dictionary):\n    var code = error.get("code", "")\n    var message = error.get("message", "")\n\n    match code:\n        "USER_CANCELED":\n            print("Purchase canceled by user")\n        "ITEM_ALREADY_OWNED":\n            GodotIapPlugin.restore_purchases()\n        _:\n            show_error_dialog(message)\n'})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h3,{id:"products_fetched",children:"products_fetched"}),"\n",(0,c.jsx)(r.p,{children:"Emitted when products are fetched (primarily used for iOS async operations)."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-gdscript",children:'func _on_products_fetched(result: Dictionary):\n    if result.has("products"):\n        for product_dict in result["products"]:\n            print("Fetched: ", product_dict.get("id", ""))\n    elif result.has("error"):\n        print("Failed: ", result.get("error", ""))\n'})})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},7856(e,r,s){s.d(r,{I:()=>c,V:()=>n});const n="https://iapkit.com",c="https://www.hyo.dev/api/ad-banner/cmju2uzzm0000yr9h3dhpflgy"},8453(e,r,s){s.d(r,{R:()=>d,x:()=>t});var n=s(6540);const c={},i=n.createContext(c);function d(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);