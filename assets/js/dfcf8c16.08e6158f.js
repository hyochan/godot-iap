"use strict";(globalThis.webpackChunkgodot_iap_docs=globalThis.webpackChunkgodot_iap_docs||[]).push([[840],{5159(e,n,s){s.d(n,{A:()=>c});s(6540);var r=s(6025),i=s(7856),t=s(4848);function c({title:e}){const n=(0,r.Ay)("/img/iapkit-banner.gif"),s=()=>{fetch(i.I,{method:"POST"}).catch(()=>{})};return(0,t.jsxs)("div",{style:{flex:1,marginTop:24,marginBottom:24},children:[(0,t.jsx)("a",{href:i.V,target:"_blank",rel:"noopener noreferrer",onClick:s,children:(0,t.jsx)("img",{src:n,alt:"IAPKit - In-App Purchase Solution",style:{display:"block",margin:"0 auto",objectFit:"contain"}})}),e?(0,t.jsx)("a",{href:i.V,target:"_blank",rel:"noopener noreferrer",onClick:s,style:{display:"block",fontSize:"0.875rem",color:"#666",textAlign:"center",marginTop:"8px",textDecoration:"none"},children:e}):null]})}},7450(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"api/methods/ios-specific","title":"iOS-Specific Methods","description":"Methods available only on iOS platform using StoreKit 2. All methods use typed parameters and return typed objects.","source":"@site/docs/api/methods/ios-specific.md","sourceDirName":"api/methods","slug":"/api/methods/ios-specific","permalink":"/godot-iap/api/methods/ios-specific","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/godot-iap/tree/main/docs/docs/api/methods/ios-specific.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Signals","permalink":"/godot-iap/api/methods/listeners"},"next":{"title":"Android-Specific Methods","permalink":"/godot-iap/api/methods/android-specific"}}');var i=s(4848),t=s(8453),c=s(5159);const o={sidebar_position:3},d="iOS-Specific Methods",l={},a=[{value:"Setup",id:"setup",level:2},{value:"Transaction Management",id:"transaction-management",level:2},{value:"sync_ios",id:"sync_ios",level:3},{value:"clear_transaction_ios",id:"clear_transaction_ios",level:3},{value:"get_pending_transactions_ios",id:"get_pending_transactions_ios",level:3},{value:"Offer Code &amp; Subscriptions",id:"offer-code--subscriptions",level:2},{value:"present_code_redemption_sheet_ios",id:"present_code_redemption_sheet_ios",level:3},{value:"show_manage_subscriptions_ios",id:"show_manage_subscriptions_ios",level:3},{value:"subscription_status_ios",id:"subscription_status_ios",level:3},{value:"is_eligible_for_intro_offer_ios",id:"is_eligible_for_intro_offer_ios",level:3},{value:"Refund &amp; Entitlement",id:"refund--entitlement",level:2},{value:"begin_refund_request_ios",id:"begin_refund_request_ios",level:3},{value:"current_entitlement_ios",id:"current_entitlement_ios",level:3},{value:"latest_transaction_ios",id:"latest_transaction_ios",level:3},{value:"Storefront",id:"storefront",level:2},{value:"get_storefront_ios",id:"get_storefront_ios",level:3},{value:"App Transaction",id:"app-transaction",level:2},{value:"get_app_transaction_ios",id:"get_app_transaction_ios",level:3},{value:"Promoted Products",id:"promoted-products",level:2},{value:"get_promoted_product_ios",id:"get_promoted_product_ios",level:3},{value:"request_purchase_on_promoted_product_ios",id:"request_purchase_on_promoted_product_ios",level:3},{value:"Receipt &amp; Verification",id:"receipt--verification",level:2},{value:"get_receipt_data_ios",id:"get_receipt_data_ios",level:3},{value:"is_transaction_verified_ios",id:"is_transaction_verified_ios",level:3},{value:"get_transaction_jws_ios",id:"get_transaction_jws_ios",level:3},{value:"External Purchase APIs (iOS 18.2+)",id:"external-purchase-apis-ios-182",level:2},{value:"can_present_external_purchase_notice_ios",id:"can_present_external_purchase_notice_ios",level:3},{value:"present_external_purchase_notice_sheet_ios",id:"present_external_purchase_notice_sheet_ios",level:3},{value:"present_external_purchase_link_ios",id:"present_external_purchase_link_ios",level:3}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ios-specific-methods",children:"iOS-Specific Methods"})}),"\n",(0,i.jsx)(c.A,{}),"\n",(0,i.jsx)(n.p,{children:"Methods available only on iOS platform using StoreKit 2. All methods use typed parameters and return typed objects."}),"\n",(0,i.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'# Load OpenIAP types\nconst Types = preload("res://addons/godot-iap/types.gd")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"transaction-management",children:"Transaction Management"}),"\n",(0,i.jsx)(n.h3,{id:"sync_ios",children:"sync_ios"}),"\n",(0,i.jsx)(n.p,{children:"Synchronize transactions with the App Store. Call this to ensure all transactions are up to date."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func sync_ios() -> Types.VoidResult\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.VoidResult"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'func refresh_purchases():\n    var result = GodotIapPlugin.sync_ios()\n    if result.success:\n        print("Sync completed")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"clear_transaction_ios",children:"clear_transaction_ios"}),"\n",(0,i.jsx)(n.p,{children:"Clear finished transactions from the queue."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func clear_transaction_ios() -> Types.VoidResult\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.VoidResult"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get_pending_transactions_ios",children:"get_pending_transactions_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get all pending transactions that haven't been finished."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_pending_transactions_ios() -> Array\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Array"})," of ",(0,i.jsx)(n.code,{children:"Types.TransactionIOS"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'func check_pending():\n    var transactions = GodotIapPlugin.get_pending_transactions_ios()\n    for tx in transactions:\n        # Access typed properties\n        print("Pending: %s" % tx.product_id)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"offer-code--subscriptions",children:"Offer Code & Subscriptions"}),"\n",(0,i.jsx)(n.h3,{id:"present_code_redemption_sheet_ios",children:"present_code_redemption_sheet_ios"}),"\n",(0,i.jsx)(n.p,{children:"Present the App Store offer code redemption sheet."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func present_code_redemption_sheet_ios() -> Types.VoidResult\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.VoidResult"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func _on_redeem_code_pressed():\n    GodotIapPlugin.present_code_redemption_sheet_ios()\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Note",type:"info",children:(0,i.jsxs)(n.p,{children:["Available on iOS 14.0+. Results come through the ",(0,i.jsx)(n.code,{children:"purchase_updated"})," signal."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"show_manage_subscriptions_ios",children:"show_manage_subscriptions_ios"}),"\n",(0,i.jsx)(n.p,{children:"Open the subscription management page in Settings."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func show_manage_subscriptions_ios() -> Types.VoidResult\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.VoidResult"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func _on_manage_subscriptions_pressed():\n    GodotIapPlugin.show_manage_subscriptions_ios()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"subscription_status_ios",children:"subscription_status_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the subscription status for a product."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func subscription_status_ios(sku: String) -> Array\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sku"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Subscription product ID"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Array"})," of ",(0,i.jsx)(n.code,{children:"Types.SubscriptionStatusIOS"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'func check_subscription_status(subscription_id: String):\n    var statuses = GodotIapPlugin.subscription_status_ios(subscription_id)\n    for status in statuses:\n        print("State: ", status.state)\n        if status.renewal_info:\n            print("Will renew: ", status.renewal_info.will_auto_renew)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"is_eligible_for_intro_offer_ios",children:"is_eligible_for_intro_offer_ios"}),"\n",(0,i.jsx)(n.p,{children:"Check if user is eligible for an introductory offer."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func is_eligible_for_intro_offer_ios(group_id: String) -> bool\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"group_id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Subscription group ID"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"bool"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func check_intro_eligibility(group_id: String):\n    if GodotIapPlugin.is_eligible_for_intro_offer_ios(group_id):\n        show_intro_offer_ui()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"refund--entitlement",children:"Refund & Entitlement"}),"\n",(0,i.jsx)(n.h3,{id:"begin_refund_request_ios",children:"begin_refund_request_ios"}),"\n",(0,i.jsx)(n.p,{children:"Begin a refund request for a transaction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func begin_refund_request_ios(transaction_id: String) -> Types.RefundRequestResultIOS\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transaction_id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Transaction ID to refund"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.RefundRequestResultIOS"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'func request_refund(transaction_id: String):\n    var result = GodotIapPlugin.begin_refund_request_ios(transaction_id)\n    print("Refund status: ", result.status)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"current_entitlement_ios",children:"current_entitlement_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the current entitlement for a product."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func current_entitlement_ios(sku: String) -> Variant\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sku"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Product ID"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Variant"})," - ",(0,i.jsx)(n.code,{children:"Types.TransactionIOS"})," or ",(0,i.jsx)(n.code,{children:"null"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"latest_transaction_ios",children:"latest_transaction_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the latest transaction for a product."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func latest_transaction_ios(sku: String) -> Variant\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sku"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Product ID"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Variant"})," - ",(0,i.jsx)(n.code,{children:"Types.TransactionIOS"})," or ",(0,i.jsx)(n.code,{children:"null"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"storefront",children:"Storefront"}),"\n",(0,i.jsx)(n.h3,{id:"get_storefront_ios",children:"get_storefront_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the user's storefront information (country/region)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_storefront_ios() -> Variant\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Variant"})," - ",(0,i.jsx)(n.code,{children:"Types.StorefrontIOS"})," or ",(0,i.jsx)(n.code,{children:"null"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'func get_user_country() -> String:\n    var storefront = GodotIapPlugin.get_storefront_ios()\n    if storefront:\n        return storefront.country_code\n    return ""\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"app-transaction",children:"App Transaction"}),"\n",(0,i.jsx)(n.h3,{id:"get_app_transaction_ios",children:"get_app_transaction_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the app transaction (proof of purchase from App Store)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_app_transaction_ios() -> Variant\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Variant"})," - ",(0,i.jsx)(n.code,{children:"Types.AppTransactionIOS"})," or ",(0,i.jsx)(n.code,{children:"null"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func verify_app_purchase():\n    var app_tx = GodotIapPlugin.get_app_transaction_ios()\n    if app_tx:\n        # Send to server for verification\n        await verify_on_server(app_tx.jws)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"promoted-products",children:"Promoted Products"}),"\n",(0,i.jsx)(n.h3,{id:"get_promoted_product_ios",children:"get_promoted_product_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the currently promoted product (from App Store promotional purchase)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_promoted_product_ios() -> Variant\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Variant"})," - ",(0,i.jsx)(n.code,{children:"Types.ProductIOS"})," or ",(0,i.jsx)(n.code,{children:"null"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"request_purchase_on_promoted_product_ios",children:"request_purchase_on_promoted_product_ios"}),"\n",(0,i.jsx)(n.p,{children:"Complete a purchase for a promoted product."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func request_purchase_on_promoted_product_ios() -> Variant\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Variant"})," - ",(0,i.jsx)(n.code,{children:"Types.PurchaseIOS"})," or ",(0,i.jsx)(n.code,{children:"null"})]}),"\n",(0,i.jsx)(n.admonition,{title:"Deprecated",type:"warning",children:(0,i.jsxs)(n.p,{children:["This method is deprecated. Use ",(0,i.jsx)(n.code,{children:"promoted_product_ios"})," signal with ",(0,i.jsx)(n.code,{children:"request_purchase"})," instead."]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func _setup_signals():\n    GodotIapPlugin.promoted_product_ios.connect(_on_promoted_product)\n\nfunc _on_promoted_product(product_id: String):\n    # User tapped a promoted product in App Store\n    var props = Types.RequestPurchaseProps.new()\n    props.request = Types.RequestPurchasePropsByPlatforms.new()\n    props.request.apple = Types.RequestPurchaseIosProps.new()\n    props.request.apple.sku = product_id\n    props.type = Types.ProductQueryType.IN_APP\n\n    GodotIapPlugin.request_purchase(props)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"receipt--verification",children:"Receipt & Verification"}),"\n",(0,i.jsx)(n.h3,{id:"get_receipt_data_ios",children:"get_receipt_data_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the App Store receipt data."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_receipt_data_ios() -> String\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"String"})," - Base64-encoded receipt data"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_receipt() -> String:\n    return GodotIapPlugin.get_receipt_data_ios()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"is_transaction_verified_ios",children:"is_transaction_verified_ios"}),"\n",(0,i.jsx)(n.p,{children:"Check if a transaction is verified."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func is_transaction_verified_ios(transaction_id: String) -> bool\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transaction_id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Transaction ID"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"bool"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get_transaction_jws_ios",children:"get_transaction_jws_ios"}),"\n",(0,i.jsx)(n.p,{children:"Get the JWS (JSON Web Signature) for a transaction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func get_transaction_jws_ios(transaction_id: String) -> String\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transaction_id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"Transaction ID"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"String"})," - JWS token"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"external-purchase-apis-ios-182",children:"External Purchase APIs (iOS 18.2+)"}),"\n",(0,i.jsx)(n.p,{children:"These methods support external purchase flows for apps in eligible regions."}),"\n",(0,i.jsx)(n.h3,{id:"can_present_external_purchase_notice_ios",children:"can_present_external_purchase_notice_ios"}),"\n",(0,i.jsx)(n.p,{children:"Check if external purchase notice can be presented."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func can_present_external_purchase_notice_ios() -> bool\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"bool"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"present_external_purchase_notice_sheet_ios",children:"present_external_purchase_notice_sheet_ios"}),"\n",(0,i.jsx)(n.p,{children:"Present the external purchase notice sheet to the user."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func present_external_purchase_notice_sheet_ios() -> Types.VoidResult\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.VoidResult"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"present_external_purchase_link_ios",children:"present_external_purchase_link_ios"}),"\n",(0,i.jsx)(n.p,{children:"Present an external purchase link."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:"func present_external_purchase_link_ios(url: String) -> Types.VoidResult\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"url"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"String"})}),(0,i.jsx)(n.td,{children:"External purchase URL"})]})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"Types.VoidResult"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gdscript",children:'func open_external_purchase():\n    # First check if we can present the notice\n    if GodotIapPlugin.can_present_external_purchase_notice_ios():\n        # Present the notice first\n        GodotIapPlugin.present_external_purchase_notice_sheet_ios()\n\nfunc _on_notice_accepted():\n    # After user accepts, open external link\n    GodotIapPlugin.present_external_purchase_link_ios("https://your-store.com/purchase")\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Regional Availability",type:"info",children:(0,i.jsx)(n.p,{children:"External purchase APIs are only available in regions where Apple allows external purchasing (e.g., EU under DMA)."})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},7856(e,n,s){s.d(n,{I:()=>i,V:()=>r});const r="https://iapkit.com",i="https://www.hyo.dev/api/ad-banner/cmju2uzzm0000yr9h3dhpflgy"},8453(e,n,s){s.d(n,{R:()=>c,x:()=>o});var r=s(6540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);